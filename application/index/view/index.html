<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="static/css/reset.css">
    <link rel="stylesheet" href="static/css/common.css">
    <link rel="stylesheet" href="static/css/index.css">
    <script type="text/javascript" src="static/js/baiduTemplate.js"></script>
</head>
    <body class="index">
        {include file="header" /}

        <!--<div class="module-wrap clearfix" id="app">-->
            <!--&lt;!&ndash;<component :is="currentView"></component>&ndash;&gt;-->
            <!--<ul>-->
                <!--<li v-for="l in list">-->
                    <!--{{l.tag}}-->
                <!--</li>-->
            <!--</ul>-->

        <!--</div>-->

        <div class="module-wrap clearfix" id="app">

        </div>

        <div class="login-mask hid">
            <div class="login-box">
                <ul class="nav">
                    <li>
                        <a href="javascript:void(0)" class="login">登陆</a>
                    </li><li class="register">
                    <a href="javascript:void(0)">注册</a>
                </li>
                </ul>
                <form action="" class="login-form">
                    <input type="text" placeholder="请输入账号" name="l-account" class="l-account">
                    <input type="password" placeholder="请输入密码" name="l-password" class="l-password">
                    <input type="button" value="登陆" id="login">
                </form>

                <form action="" class="register-form hid" method="post">
                    <input type="text" placeholder="请输入注册账号" name="r-account" class="r-account">
                    <input type="password" placeholder="请输入注册密码" name="r-password" class="r-password">
                    <input type="button" value="注册" id="register">
                </form>
            </div>
        </div>
        <script id="t:_1234-abcd-1" type="text/html">

            <div class="col0 col">

                <%for(var i=0;i<list.length;i++){%>

                    <%if(i%4 == 0){%>

                        <div class="module">
                            <div>
                                <div class="head">
                                    <img src="static/images/download.jpg" alt="">
                                    <span><%=list[i].tag%></span>
                                </div><div class="focus">
                                <span>关注</span>
                            </div>
                            </div>

                            <ul class="topic">
                                <%for(var j=0;j<list[i]['list'].length;j++){%>
                                <li>
                                    <a href="/index/post/detail/<%=list[i]['list'][j].id%>"><%=list[i]['list'][j].content%></a>
                                </li>
                                <%}%>
                            </ul>
                            <div class="more">
                                <span>
                                    <a href="/index/post/list/<%=list[i].tag_id%>">更多</a>
                                </span>
                            </div>
                        </div>

                    <%}%>

                <%}%>



            </div>

            <div class="col1 col">

                <%for(var i=0;i<list.length;i++){%>

                <%if(i%4 == 1){%>

                <div class="module">
                    <div>
                        <div class="head">
                            <img src="static/images/download.jpg" alt="">
                            <span><%=list[i].tag%></span>
                        </div><div class="focus">
                        <span>关注</span>
                    </div>
                    </div>

                    <ul class="topic">
                        <%for(var j=0;j<list[i]['list'].length;j++){%>
                        <li>
                            <a href="/index/post/detail/<%=list[i]['list'][j].id%>"><%=list[i]['list'][j].content%></a>
                        </li>
                        <%}%>
                    </ul>
                    <div class="more">
                        <span>
                            <a href="/index/post/list/<%=list[i].tag_id%>">更多</a>
                        </span>
                    </div>
                </div>

                <%}%>

                <%}%>



            </div>
            <div class="col2 col">

                <%for(var i=0;i<list.length;i++){%>

                    <%if(i%4 == 2){%>

                        <div class="module">
                            <div>
                                <div class="head">
                                    <img src="static/images/download.jpg" alt="">
                                    <span><%=list[i].tag%></span>
                                </div><div class="focus">
                                <span>关注</span>
                            </div>
                            </div>

                            <ul class="topic">

                                <%for(var j=0;j<list[i]['list'].length;j++){%>
                                    <li>
                                        <a href="/index/post/detail/<%=list[i]['list'][j].id%>"><%=list[i]['list'][j].content%></a>
                                    </li>
                                <%}%>

                            </ul>
                            <div class="more">
                                <span>
                                    <a href="/index/post/list/<%=list[i].tag_id%>">更多</a>
                                </span>
                            </div>
                        </div>

                    <%}%>

                <%}%>

            </div>


            <div class="col3 col">

                <%for(var i=0;i<list.length;i++){%>

                <%if(i%4 == 2){%>

                <div class="module">
                    <div>
                        <div class="head">
                            <img src="static/images/download.jpg" alt="">
                            <span><%=list[i].tag%></span>
                        </div><div class="focus">
                        <span>关注</span>
                    </div>
                    </div>

                    <ul class="topic">
                        <%for(var j=0;j<list[i]['list'].length;j++){%>
                        <li>
                            <a href="/index/post/detail/<%=list[i]['list'][j].id%>"><%=list[i]['list'][j].content%></a>
                        </li>
                        <%}%>
                    </ul>
                    <div class="more">
                        <span>
                            <a href="/index/post/list/<%=list[i].tag_id%>">更多</a>
                        </span>
                    </div>
                </div>

                <%}%>

                <%}%>

            </div>
        </script>
        <script type="text/javascript" src="static/js/jquery-1.11.3.min.js"></script>
        <script type="text/javascript">

            $.ajax({
                type: "get",
                url: "index/index_post",
                dataType: "json",
                success: function (data) {

                    var data = {
                        list : transformArr(data.list)
                    };

                    console.log(data.list);

                    var bt=baidu.template;

                    //可以设置分隔符
                    //bt.LEFT_DELIMITER='<!';
                    //bt.RIGHT_DELIMITER='!>';

                    //可以设置输出变量是否自动HTML转义
                    //bt.ESCAPE = false;

                    //最简使用方法
                    var html=bt('t:_1234-abcd-1',data);

                    //渲染
                    document.getElementById('app').innerHTML=html;

                },
                error: function () {
                    console.log('llaalal');
                }
            });

            function transformArr(data){
                var arr = [];
                var index = 0;
                for(var i in data){
                    arr[index] = data[i];
                    index++;
                }
                return arr;
            }

        </script>



    </body>

<script type="text/javascript" src="static/js/header.js"></script>
<script type="text/javascript" src="static/js/common.js"></script>


</html>